#include <stdio.h>
#include <stdlib.h>
#include <time.h>

// 트리 노드 구조체
typedef struct TreeNode {
    const char* question; // 문제
    const char* answer1; // 1번 보기
    const char* answer2; // 2번 보기
    const char* answer3; // 3번 보기
    const char* answer4; // 4번 보기
    int correctAnswer; // 정답 번호 (1 ~ 4)
    struct TreeNode* yes; // 정답일 경우 이동할 노드
    struct TreeNode* no; // 오답일 경우 이동할 노드
} TreeNode;

// 노드 생성 함수
TreeNode* createNode(const char* question, const char* answer1, const char* answer2, const char* answer3, const char* answer4, int correctAnswer, TreeNode* yes, TreeNode* no) {
    TreeNode* node = (TreeNode*)malloc(sizeof(TreeNode));
    node->question = question;
    node->answer1 = answer1;
    node->answer2 = answer2;
    node->answer3 = answer3;
    node->answer4 = answer4;
    node->correctAnswer = correctAnswer;
    node->yes = yes;
    node->no = no;
    return node;
}

// 게임 플레이 함수
void play(TreeNode* node, int* score) {
    if (node->yes == NULL && node->no == NULL) { // leaf node인 경우
        printf("%s\n", node->question);

        int answer;
        scanf("%d", &answer);

        if (answer < 1 || answer > 4) {
            printf("잘못된 입력입니다. 1 ~ 4 중 하나를 입력해주세요.\n");
            play(node, score);
            return;
        }

        if (answer == node->correctAnswer) {
            printf("정답입니다!\n");
            (*score) += 0.5; // 점수 추가
        }
        else {
            printf("오답입니다. 정답은 %d번입니다.\n", node->correctAnswer);
        }

        return;
    }

    printf("%c\n", node->question);
    printf("1. %c\n2. %c\n3. %c\n4. %c\n", node->answer1, node->answer2, node->answer3, node->answer4);

    int answer;
    scanf("%d", &answer);

    if (answer < 1 || answer > 4) {
        printf("잘못된 입력입니다. 1 ~ 4 중 하나를 입력해주세요.\n");
        play(node, score);
        return;
    }

    if (answer == node->correctAnswer) {
        printf("정답입니다!\n");
        (*score) += 0.5; // 점수 추가
        play(node->yes, score);
    }
    else {
        printf("오답입니다. 정답은 %d번입니다.\n", node->correctAnswer);
        play(node->no, score);
    }
}

int main() {
    // 트리 구조 생성
    TreeNode* root = createNode("1. 다음 중 C언어에서 사용되는데이터 타입이 아닌 것은 무엇일까요?", "char", "integer", "float", "book", 4, NULL, NULL);
    TreeNode* root = createNode("2. C언어에서 사용되는 대표적인 연산자는 무엇일까요?", "+", "-", "*", "/", 3, , NULL, NULL);
    TreeNode* root = createNode("3. 다음 중 C언어에서 제공하는 제어문이 아닌 것은 무엇일까요?", "if문", "for문", "while문", "repeat문", 4, NULL, NULL);
   

    // 랜덤 시드 설정
    srand(time(NULL));

    int score = 0;
    printf("C언어 퀴즈 게임을 시작합니다!\n");
    printf("4지선다 문제에 대해 1 ~ 4 중 하나를 입력해주세요.\n");
    printf("-----------------------------------------\n");
    play(root, &score);
    printf("-----------------------------------------\n");
    printf("게임 종료! 총 점수는 %.1f점입니다.\n", score);

    return 0;
}
